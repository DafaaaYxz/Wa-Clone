<div class="p-5">
  <h2>WhatsApp Clone</h2>
  <div id="regForm">
    <input type="text" id="name" placeholder="Nama Anda" class="border p-2">
    <button onclick="daftar()" class="bg-green-500 text-white p-2">Daftar (Auto Nomor)</button>
  </div>
  <hr class="my-5">
  <input type="text" id="lPhone" placeholder="+88..." class="border p-2">
  <button onclick="login()" class="bg-blue-500 text-white p-2">Login</button>
</div>

<script>
async function daftar() {
  const name = document.getElementById('name').value;
  const res = await fetch('/register', {
    method: 'POST',
    headers: {'Content-Type': 'application/json'},
    body: JSON.stringify({name})
  });
  const data = await res.json();
  if(data.success) {
    alert("Nomor Anda: " + data.phone);
    window.location.href = '/home';
  }
}
async function login() {
  const phone = document.getElementById('lPhone').value;
  const res = await fetch('/login', {
    method: 'POST',
    headers: {'Content-Type': 'application/json'},
    body: JSON.stringify({phone})
  });
  const data = await res.json();
  if(data.success) window.location.href = '/home';
  else alert("Gagal login");
}
</script>
